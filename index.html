<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDC East - Attendance System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --light: #ecf0f1;
            --dark: #34495e;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .login-container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: var(--primary);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 24px;
        }

        h1 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 24px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .btn {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
        }

        .btn-login {
            width: 100%;
            padding: 12px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-login:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .alert {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            text-align: left;
            font-size: 14px;
        }

        .alert-error {
            background: #ffeaea;
            color: var(--danger);
            border: 1px solid #ffcccc;
        }

        .demo-info {
            margin-top: 25px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 12px;
            text-align: left;
        }

        .demo-info h4 {
            margin-bottom: 10px;
            color: #333;
        }

        .demo-account {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            padding: 5px 0;
        }

        /* Main App Styles */
        .app-container {
            display: none;
            width: 100%;
            height: 100vh;
            background: #f5f7fa;
        }

        .sidebar {
            width: 250px;
            background: var(--primary);
            color: white;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 20px;
            background: var(--dark);
            text-align: center;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        .sidebar-menu li {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-menu a {
            display: block;
            padding: 15px 20px;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
        }

        .sidebar-menu a:hover, .sidebar-menu a.active {
            background: var(--secondary);
            padding-left: 25px;
        }

        .main-content {
            margin-left: 250px;
            padding: 20px;
            height: 100vh;
            overflow-y: auto;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .filter-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: end;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-size: 12px;
            font-weight: 600;
            color: #333;
            margin-bottom: 0;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        table th, table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        table th {
            background: #f8f9fa;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .table-container {
            max-height: 600px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .date-header {
            font-size: 11px;
            font-weight: normal;
            color: #666;
        }

        .shift-pagi { background-color: #d4edda; }
        .shift-siang { background-color: #fff3cd; }
        .shift-malam { background-color: #e2e3e5; }
        .shift-pjk-pagi { background-color: #cce7ff; }
        .shift-pjk-siang { background-color: #f8d7da; }
        .shift-libur { background-color: #f8f9fa; }
        .shift-cuti { background-color: #ffeaa7; }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom: 3px solid var(--secondary);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-container" id="loginScreen">
        <div class="logo">CD</div>
        <h1>CDC East</h1>
        <p class="subtitle">Employee Attendance System</p>
        
        <div class="alert alert-error" id="loginAlert">
            Username atau password salah!
        </div>

        <form id="loginForm">
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username" placeholder="Masukkan username" value="admin">
            </div>
            
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Masukkan password" value="admin123">
            </div>
            
            <button type="submit" class="btn-login">Login</button>
        </form>

        <div class="demo-info">
            <h4>Akun Demo:</h4>
            <div class="demo-account">
                <span>Admin:</span>
                <span>admin / admin123</span>
            </div>
            <div class="demo-account">
                <span>Karyawan:</span>
                <span>user1 / user123</span>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div class="app-container" id="appContainer">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>CDC East</h2>
                <p>Attendance System</p>
            </div>
            
            <!-- Admin Menu -->
            <ul class="sidebar-menu" id="adminMenu">
                <li><a href="#" class="menu-item active" data-target="attendanceEntry">Input Absen Tabel</a></li>
                <li><a href="#" class="menu-item" data-target="attendanceTable">Output Absen Tabel</a></li>
                <li><a href="#" class="menu-item" data-target="leaveEntry">Input Cuti</a></li>
                <li><a href="#" class="menu-item" data-target="leaveSummary">Summary Cuti</a></li>
                <li><a href="#" class="menu-item" data-target="attendanceDetail">Absen Detail</a></li>
                <li><a href="#" class="menu-item" data-target="overtimeCalculation">Overtime Calculation</a></li>
                <li><a href="#" class="menu-item" data-target="overtimeSummary">Summary Overtime</a></li>
                <li><a href="#" class="menu-item" data-target="appManagement">Management Aplikasi</a></li>
            </ul>

            <!-- User Menu -->
            <ul class="sidebar-menu" id="userMenu" style="display: none;">
                <li><a href="#" class="menu-item active" data-target="attendanceTable">Output Absen Tabel</a></li>
                <li><a href="#" class="menu-item" data-target="leaveSummary">Summary Cuti</a></li>
                <li><a href="#" class="menu-item" data-target="overtimeForm">Overtime Form</a></li>
                <li><a href="#" class="menu-item" data-target="overtimeDetail">Overtime Detail</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1 id="pageTitle">Input Absen Tabel</h1>
                <div class="user-info">
                    <span>User: <strong id="currentUser">Admin</strong></span>
                    <button class="btn btn-warning" id="changePasswordBtn">Change Password</button>
                    <button class="btn btn-danger" id="logoutBtn">Logout</button>
                </div>
            </div>

            <!-- Attendance Entry Section -->
            <div id="attendanceEntry" class="content-section active">
                <!-- Filter Section -->
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Start Date</label>
                        <input type="date" id="startDate" class="form-control">
                    </div>
                    <div class="filter-group">
                        <label>End Date</label>
                        <input type="date" id="endDate" class="form-control">
                    </div>
                    <div class="filter-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary" id="applyFilterBtn">Apply</button>
                    </div>
                    <div class="filter-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-warning" id="refreshFilterBtn">Refresh</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Attendance Entry</h3>
                        <button class="btn btn-primary" id="addRowBtn">+ Add Row</button>
                    </div>
                    <div class="table-container">
                        <table id="attendanceEntryTable">
                            <thead>
                                <tr id="attendanceTableHeader">
                                    <!-- Header will be generated dynamically -->
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rows will be added dynamically -->
                            </tbody>
                        </table>
                    </div>
                    <button class="btn btn-success" id="saveAttendanceBtn" style="margin-top: 15px;">Save Attendance</button>
                </div>
            </div>

            <!-- Attendance Table -->
            <div id="attendanceTable" class="content-section">
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Start Date</label>
                        <input type="date" id="outputStartDate" class="form-control">
                    </div>
                    <div class="filter-group">
                        <label>End Date</label>
                        <input type="date" id="outputEndDate" class="form-control">
                    </div>
                    <div class="filter-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary" id="applyOutputFilterBtn">Apply</button>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Output Absen Tabel</h3>
                    </div>
                    <div class="table-container">
                        <table id="attendanceOutputTable">
                            <thead>
                                <tr id="outputTableHeader">
                                    <!-- Header will be generated dynamically -->
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated from saved attendance -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Leave Entry -->
            <div id="leaveEntry" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h3>Input Cuti</h3>
                    </div>
                    <form id="leaveForm">
                        <div class="form-group">
                            <label for="employeeSelect">Employee</label>
                            <select id="employeeSelect" required>
                                <option value="">Pilih Karyawan</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="leaveStartDate">Tanggal Mulai</label>
                                <input type="date" id="leaveStartDate" required>
                            </div>
                            <div class="form-group">
                                <label for="leaveEndDate">Tanggal Selesai</label>
                                <input type="date" id="leaveEndDate" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="leaveReason">Alasan Cuti</label>
                            <textarea id="leaveReason" rows="3" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-success">Submit Cuti</button>
                    </form>
                </div>
            </div>

            <!-- Leave Summary -->
            <div id="leaveSummary" class="content-section">
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Bulan</label>
                        <select id="leaveMonthFilter" class="form-control">
                            <option value="1">Januari</option>
                            <option value="2">Februari</option>
                            <option value="3">Maret</option>
                            <option value="4">April</option>
                            <option value="5">Mei</option>
                            <option value="6">Juni</option>
                            <option value="7">Juli</option>
                            <option value="8">Agustus</option>
                            <option value="9">September</option>
                            <option value="10">Oktober</option>
                            <option value="11">November</option>
                            <option value="12">Desember</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Tahun</label>
                        <select id="leaveYearFilter" class="form-control">
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary" id="applyLeaveFilterBtn">Apply</button>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Summary Cuti</h3>
                    </div>
                    <div class="table-container">
                        <table id="leaveSummaryTable">
                            <thead>
                                <tr>
                                    <th>Employee Name</th>
                                    <th>Job Position</th>
                                    <th>Tanggal Mulai</th>
                                    <th>Tanggal Selesai</th>
                                    <th>Durasi</th>
                                    <th>Alasan</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated from saved leaves -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Attendance Detail -->
            <div id="attendanceDetail" class="content-section">
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Tanggal</label>
                        <input type="date" id="detailDateFilter" class="form-control">
                    </div>
                    <div class="filter-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary" id="applyDetailFilterBtn">Apply</button>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Absen Detail</h3>
                    </div>
                    <div class="table-container">
                        <table id="attendanceDetailTable">
                            <thead>
                                <tr>
                                    <th>Employee Name</th>
                                    <th>Job Position</th>
                                    <th>Tanggal</th>
                                    <th>Shift</th>
                                    <th>Check In</th>
                                    <th>Check Out</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated from saved attendance -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Overtime Form -->
            <div id="overtimeForm" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h3>Overtime Form</h3>
                    </div>
                    <form id="overtimeFormInput">
                        <div class="form-group">
                            <label for="overtimeEmployee">Employee Name</label>
                            <input type="text" id="overtimeEmployee" readonly>
                        </div>
                        <div class="form-group">
                            <label for="overtimeDate">Date</label>
                            <input type="date" id="overtimeDate" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="overtimeStart">Start Time</label>
                                <input type="time" id="overtimeStart" required>
                            </div>
                            <div class="form-group">
                                <label for="overtimeEnd">End Time</label>
                                <input type="time" id="overtimeEnd" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="totalProject">Total Project</label>
                                <input type="number" id="totalProject" required>
                            </div>
                            <div class="form-group">
                                <label for="totalPlant">Total Plant</label>
                                <input type="number" id="totalPlant" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="plantName">Plant Name</label>
                            <select id="plantName" required>
                                <option value="">Pilih Plant</option>
                                <option value="Denpasar2">Denpasar2</option>
                                <option value="Gianyar">Gianyar</option>
                                <option value="Manukan">Manukan</option>
                                <option value="Manyar">Manyar</option>
                                <option value="Kediri">Kediri</option>
                                <option value="Krian">Krian</option>
                                <option value="Gempol">Gempol</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="totalVolume">Total Volume</label>
                            <input type="number" id="totalVolume" required>
                        </div>
                        <div class="form-group">
                            <label for="uraianTugas">Uraian Tugas</label>
                            <textarea id="uraianTugas" rows="3" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-success">Submit Overtime</button>
                    </form>
                </div>
            </div>

            <!-- Overtime Detail -->
            <div id="overtimeDetail" class="content-section">
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Bulan</label>
                        <select id="overtimeMonthFilter" class="form-control">
                            <option value="1">Januari</option>
                            <option value="2">Februari</option>
                            <option value="3">Maret</option>
                            <option value="4">April</option>
                            <option value="5">Mei</option>
                            <option value="6">Juni</option>
                            <option value="7">Juli</option>
                            <option value="8">Agustus</option>
                            <option value="9">September</option>
                            <option value="10">Oktober</option>
                            <option value="11">November</option>
                            <option value="12">Desember</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Tahun</label>
                        <select id="overtimeYearFilter" class="form-control">
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary" id="applyOvertimeFilterBtn">Apply</button>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Overtime Detail</h3>
                    </div>
                    <div class="table-container">
                        <table id="overtimeDetailTable">
                            <thead>
                                <tr>
                                    <th>Employee Name</th>
                                    <th>Date</th>
                                    <th>Start Time</th>
                                    <th>End Time</th>
                                    <th>Total Project</th>
                                    <th>Total Plant</th>
                                    <th>Plant Name</th>
                                    <th>Total Volume</th>
                                    <th>Uraian Tugas</th>
                                    <th>Overtime Hours</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated from saved overtime forms -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Overtime Calculation -->
            <div id="overtimeCalculation" class="content-section">
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Tanggal</label>
                        <input type="date" id="calculationDateFilter" class="form-control">
                    </div>
                    <div class="filter-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary" id="applyCalculationFilterBtn">Apply</button>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Overtime Calculation</h3>
                    </div>
                    <div class="table-container">
                        <table id="overtimeCalculationTable">
                            <thead>
                                <tr>
                                    <th>Employee Name</th>
                                    <th>Tanggal</th>
                                    <th>Aktual Shift In</th>
                                    <th>Aktual Shift Out</th>
                                    <th>Overtime</th>
                                    <th>Cek Rmc</th>
                                    <th>Rkp Pic</th>
                                    <th>Rmc - Shift Check In</th>
                                    <th>Remark</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated from saved attendance and overtime forms -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Overtime Summary -->
            <div id="overtimeSummary" class="content-section">
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Bulan</label>
                        <select id="summaryMonthFilter" class="form-control">
                            <option value="1">Januari</option>
                            <option value="2">Februari</option>
                            <option value="3">Maret</option>
                            <option value="4">April</option>
                            <option value="5">Mei</option>
                            <option value="6">Juni</option>
                            <option value="7">Juli</option>
                            <option value="8">Agustus</option>
                            <option value="9">September</option>
                            <option value="10">Oktober</option>
                            <option value="11">November</option>
                            <option value="12">Desember</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Tahun</label>
                        <select id="summaryYearFilter" class="form-control">
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary" id="applySummaryFilterBtn">Apply</button>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Summary Overtime</h3>
                    </div>
                    <div class="table-container">
                        <table id="overtimeSummaryTable">
                            <thead>
                                <tr>
                                    <th>Employee Name</th>
                                    <th>Job Position</th>
                                    <th>Total Overtime Hours</th>
                                    <th>Period</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated from saved overtime data -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Application Management -->
            <div id="appManagement" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h3>Management Aplikasi</h3>
                    </div>
                    <div class="tabs">
                        <div class="tab active" data-tab="userManagement">User Management</div>
                        <div class="tab" data-tab="employeeManagement">Employee Management</div>
                        <div class="tab" data-tab="systemSettings">System Settings</div>
                        <div class="tab" data-tab="passwordChanges">Password Changes</div>
                    </div>
                    
                    <div class="tab-content active" id="userManagement">
                        <div class="card-header">
                            <h4>User Management</h4>
                            <button class="btn btn-primary" id="addUserBtn">Add User</button>
                        </div>
                        <div class="table-container">
                            <table id="userManagementTable">
                                <thead>
                                    <tr>
                                        <th>Username</th>
                                        <th>Full Name</th>
                                        <th>Role</th>
                                        <th>Department</th>
                                        <th>Last Login</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- User data will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="employeeManagement">
                        <div class="card-header">
                            <h4>Employee Management</h4>
                            <button class="btn btn-primary" id="addEmployeeBtn">Add Employee</button>
                        </div>
                        <div class="table-container">
                            <table id="employeeManagementTable">
                                <thead>
                                    <tr>
                                        <th>Employee ID</th>
                                        <th>Full Name</th>
                                        <th>Position</th>
                                        <th>Department</th>
                                        <th>Join Date</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Employee data will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="systemSettings">
                        <h4>System Settings</h4>
                        <form id="systemSettingsForm">
                            <div class="form-group">
                                <label for="companyName">Company Name</label>
                                <input type="text" id="companyName" value="CDC East">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="attendanceStart">Attendance Start Time</label>
                                    <input type="time" id="attendanceStart" value="07:00">
                                </div>
                                <div class="form-group">
                                    <label for="attendanceEnd">Attendance End Time</label>
                                    <input type="time" id="attendanceEnd" value="23:00">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="overtimeRate">Overtime Rate (per hour)</label>
                                <input type="number" id="overtimeRate" value="50000">
                            </div>
                            <button type="submit" class="btn btn-success">Save Settings</button>
                        </form>
                    </div>
                    
                    <div class="tab-content" id="passwordChanges">
                        <h4>Password Changes</h4>
                        <div class="table-container">
                            <table id="passwordChangesTable">
                                <thead>
                                    <tr>
                                        <th>Username</th>
                                        <th>New Password</th>
                                        <th>Change Date</th>
                                        <th>Changed By</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Password change data will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="userModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="userModalTitle">Add User</h3>
                <button class="close-modal" id="closeUserModal">&times;</button>
            </div>
            <form id="userForm">
                <input type="hidden" id="editUserId">
                <div class="form-group">
                    <label for="modalUsername">Username</label>
                    <input type="text" id="modalUsername" required>
                </div>
                <div class="form-group">
                    <label for="modalFullName">Full Name</label>
                    <input type="text" id="modalFullName" required>
                </div>
                <div class="form-group">
                    <label for="modalPassword">Password</label>
                    <input type="password" id="modalPassword" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="modalRole">Role</label>
                        <select id="modalRole" required>
                            <option value="admin">Admin</option>
                            <option value="user">User</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="modalDepartment">Department</label>
                        <select id="modalDepartment" required>
                            <option value="Dispatcher">Dispatcher</option>
                            <option value="Booking">Booking</option>
                            <option value="HR">HR</option>
                            <option value="IT">IT</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-success">Save User</button>
                    <button type="button" class="btn btn-warning" id="cancelUserBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="employeeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="employeeModalTitle">Add Employee</h3>
                <button class="close-modal" id="closeEmployeeModal">&times;</button>
            </div>
            <form id="employeeForm">
                <input type="hidden" id="editEmployeeId">
                <div class="form-group">
                    <label for="modalEmployeeName">Full Name</label>
                    <input type="text" id="modalEmployeeName" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="modalEmployeePosition">Position</label>
                        <select id="modalEmployeePosition" required>
                            <option value="Dispatcher">Dispatcher</option>
                            <option value="Booking">Booking</option>
                            <option value="Supervisor">Supervisor</option>
                            <option value="Manager">Manager</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="modalEmployeeDepartment">Department</label>
                        <select id="modalEmployeeDepartment" required>
                            <option value="Operations">Operations</option>
                            <option value="Administration">Administration</option>
                            <option value="HR">HR</option>
                            <option value="IT">IT</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="modalJoinDate">Join Date</label>
                    <input type="date" id="modalJoinDate" required>
                </div>
                <div class="form-group">
                    <label for="modalEmployeeStatus">Status</label>
                    <select id="modalEmployeeStatus" required>
                        <option value="Active">Active</option>
                        <option value="Inactive">Inactive</option>
                        <option value="Leave">Leave</option>
                    </select>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-success">Save Employee</button>
                    <button type="button" class="btn btn-warning" id="cancelEmployeeBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Data sampel untuk demo
        let sampleEmployees = [
            { id: 1, name: "Ahmad Susanto", position: "Dispatcher", department: "Operations", joinDate: "2023-01-15", status: "Active" },
            { id: 2, name: "Budi Santoso", position: "Dispatcher", department: "Operations", joinDate: "2023-02-20", status: "Active" },
            { id: 3, name: "Citra Dewi", position: "Booking", department: "Administration", joinDate: "2023-03-10", status: "Active" },
            { id: 4, name: "Dian Pratama", position: "Dispatcher", department: "Operations", joinDate: "2023-04-05", status: "Active" },
            { id: 5, name: "Eko Wijaya", position: "Booking", department: "Administration", joinDate: "2023-05-12", status: "Active" }
        ];

        const shiftCodes = {
            "1": { name: "Pagi", class: "shift-pagi" },
            "2": { name: "Siang", class: "shift-siang" },
            "3": { name: "Malam", class: "shift-malam" },
            "11": { name: "Pjk Pagi", class: "shift-pjk-pagi" },
            "22": { name: "Pjk Siang", class: "shift-pjk-siang" },
            "O": { name: "Libur", class: "shift-libur" },
            "C": { name: "Cuti", class: "shift-cuti" }
        };

        // Data pengguna
        let users = [
            { 
                id: 1,
                username: "admin", 
                password: "admin123", 
                role: "admin", 
                name: "Administrator System",
                department: "IT",
                lastLogin: new Date(),
                status: "Active"
            },
            { 
                id: 2,
                username: "user1", 
                password: "user123", 
                role: "user", 
                name: "Ahmad Susanto",
                department: "Operations",
                lastLogin: new Date(),
                status: "Active"
            }
        ];

        // State aplikasi
        let currentUser = null;
        let isAdmin = false;
        let attendanceData = [];
        let leaveData = [];
        let overtimeData = [];
        let passwordChanges = [];
        let currentDates = [];

        // DOM Elements
        const loginScreen = document.getElementById('loginScreen');
        const appContainer = document.getElementById('appContainer');
        const loginForm = document.getElementById('loginForm');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginAlert = document.getElementById('loginAlert');
        const currentUserSpan = document.getElementById('currentUser');
        const adminMenu = document.getElementById('adminMenu');
        const userMenu = document.getElementById('userMenu');
        const logoutBtn = document.getElementById('logoutBtn');
        const changePasswordBtn = document.getElementById('changePasswordBtn');
        const menuItems = document.querySelectorAll('.menu-item');
        const contentSections = document.querySelectorAll('.content-section');
        const pageTitle = document.getElementById('pageTitle');
        const startDateInput = document.getElementById('startDate');
        const endDateInput = document.getElementById('endDate');
        const applyFilterBtn = document.getElementById('applyFilterBtn');
        const refreshFilterBtn = document.getElementById('refreshFilterBtn');
        const addRowBtn = document.getElementById('addRowBtn');
        const attendanceEntryTable = document.getElementById('attendanceEntryTable');
        const attendanceTableHeader = document.getElementById('attendanceTableHeader');
        const saveAttendanceBtn = document.getElementById('saveAttendanceBtn');
        const employeeSelect = document.getElementById('employeeSelect');

        // Management Elements
        const addUserBtn = document.getElementById('addUserBtn');
        const addEmployeeBtn = document.getElementById('addEmployeeBtn');
        const userModal = document.getElementById('userModal');
        const employeeModal = document.getElementById('employeeModal');
        const closeUserModal = document.getElementById('closeUserModal');
        const closeEmployeeModal = document.getElementById('closeEmployeeModal');
        const userForm = document.getElementById('userForm');
        const employeeForm = document.getElementById('employeeForm');
        const cancelUserBtn = document.getElementById('cancelUserBtn');
        const cancelEmployeeBtn = document.getElementById('cancelEmployeeBtn');

        // Initialize application
        function initApp() {
            // Set default dates
            const today = new Date();
            const endDate = new Date();
            endDate.setDate(today.getDate() + 9);
            
            startDateInput.value = today.toISOString().split('T')[0];
            endDateInput.value = endDate.toISOString().split('T')[0];
            
            // Generate initial table header
            generateTableHeader();
            
            // Populate employee dropdown
            populateEmployeeSelect();
            
            // Add event listeners
            loginForm.addEventListener('submit', handleLogin);
            logoutBtn.addEventListener('click', handleLogout);
            changePasswordBtn.addEventListener('click', handleChangePassword);
            menuItems.forEach(item => {
                item.addEventListener('click', handleMenuClick);
            });
            applyFilterBtn.addEventListener('click', applyDateFilter);
            refreshFilterBtn.addEventListener('click', refreshDateFilter);
            addRowBtn.addEventListener('click', addAttendanceRow);
            saveAttendanceBtn.addEventListener('click', saveAttendance);
            
            // Management event listeners
            addUserBtn.addEventListener('click', () => showUserModal());
            addEmployeeBtn.addEventListener('click', () => showEmployeeModal());
            closeUserModal.addEventListener('click', () => userModal.style.display = 'none');
            closeEmployeeModal.addEventListener('click', () => employeeModal.style.display = 'none');
            cancelUserBtn.addEventListener('click', () => userModal.style.display = 'none');
            cancelEmployeeBtn.addEventListener('click', () => employeeModal.style.display = 'none');
            userForm.addEventListener('submit', handleUserSubmit);
            employeeForm.addEventListener('submit', handleEmployeeSubmit);
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === userModal) userModal.style.display = 'none';
                if (e.target === employeeModal) employeeModal.style.display = 'none';
            });
            
            // Load initial data
            loadSampleData();
        }

        // Show user modal
        function showUserModal(user = null) {
            const title = document.getElementById('userModalTitle');
            const form = document.getElementById('userForm');
            
            if (user) {
                title.textContent = 'Edit User';
                document.getElementById('editUserId').value = user.id;
                document.getElementById('modalUsername').value = user.username;
                document.getElementById('modalFullName').value = user.name;
                document.getElementById('modalPassword').value = user.password;
                document.getElementById('modalRole').value = user.role;
                document.getElementById('modalDepartment').value = user.department;
            } else {
                title.textContent = 'Add User';
                form.reset();
                document.getElementById('editUserId').value = '';
            }
            
            userModal.style.display = 'flex';
        }

        // Show employee modal
        function showEmployeeModal(employee = null) {
            const title = document.getElementById('employeeModalTitle');
            const form = document.getElementById('employeeForm');
            
            if (employee) {
                title.textContent = 'Edit Employee';
                document.getElementById('editEmployeeId').value = employee.id;
                document.getElementById('modalEmployeeName').value = employee.name;
                document.getElementById('modalEmployeePosition').value = employee.position;
                document.getElementById('modalEmployeeDepartment').value = employee.department;
                document.getElementById('modalJoinDate').value = employee.joinDate;
                document.getElementById('modalEmployeeStatus').value = employee.status;
            } else {
                title.textContent = 'Add Employee';
                form.reset();
                document.getElementById('editEmployeeId').value = '';
                document.getElementById('modalJoinDate').value = new Date().toISOString().split('T')[0];
            }
            
            employeeModal.style.display = 'flex';
        }

        // Handle user form submission
        function handleUserSubmit(e) {
            e.preventDefault();
            
            const userId = document.getElementById('editUserId').value;
            const username = document.getElementById('modalUsername').value;
            const fullName = document.getElementById('modalFullName').value;
            const password = document.getElementById('modalPassword').value;
            const role = document.getElementById('modalRole').value;
            const department = document.getElementById('modalDepartment').value;
            
            if (userId) {
                // Edit existing user
                const userIndex = users.findIndex(u => u.id == userId);
                if (userIndex !== -1) {
                    users[userIndex] = {
                        ...users[userIndex],
                        username,
                        name: fullName,
                        password,
                        role,
                        department
                    };
                }
            } else {
                // Add new user
                const newUser = {
                    id: users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1,
                    username,
                    password,
                    role,
                    name: fullName,
                    department,
                    lastLogin: null,
                    status: 'Active'
                };
                users.push(newUser);
            }
            
            userModal.style.display = 'none';
            refreshUserManagementTable();
            alert('User saved successfully!');
        }

        // Handle employee form submission
        function handleEmployeeSubmit(e) {
            e.preventDefault();
            
            const employeeId = document.getElementById('editEmployeeId').value;
            const name = document.getElementById('modalEmployeeName').value;
            const position = document.getElementById('modalEmployeePosition').value;
            const department = document.getElementById('modalEmployeeDepartment').value;
            const joinDate = document.getElementById('modalJoinDate').value;
            const status = document.getElementById('modalEmployeeStatus').value;
            
            if (employeeId) {
                // Edit existing employee
                const empIndex = sampleEmployees.findIndex(e => e.id == employeeId);
                if (empIndex !== -1) {
                    sampleEmployees[empIndex] = {
                        ...sampleEmployees[empIndex],
                        name,
                        position,
                        department,
                        joinDate,
                        status
                    };
                }
            } else {
                // Add new employee
                const newEmployee = {
                    id: sampleEmployees.length > 0 ? Math.max(...sampleEmployees.map(e => e.id)) + 1 : 1,
                    name,
                    position,
                    department,
                    joinDate,
                    status
                };
                sampleEmployees.push(newEmployee);
            }
            
            employeeModal.style.display = 'none';
            refreshEmployeeManagementTable();
            populateEmployeeSelect();
            alert('Employee saved successfully!');
        }

        // Refresh user management table
        function refreshUserManagementTable() {
            const tbody = document.querySelector('#userManagementTable tbody');
            tbody.innerHTML = '';
            
            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.username}</td>
                    <td>${user.name}</td>
                    <td>${user.role}</td>
                    <td>${user.department}</td>
                    <td>${user.lastLogin ? user.lastLogin.toLocaleString() : 'Never'}</td>
                    <td><span class="status-badge ${user.status.toLowerCase()}">${user.status}</span></td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="showUserModal(${JSON.stringify(user).replace(/"/g, '&quot;')})">Edit</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteUser(${user.id})">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Refresh employee management table
        function refreshEmployeeManagementTable() {
            const tbody = document.querySelector('#employeeManagementTable tbody');
            tbody.innerHTML = '';
            
            sampleEmployees.forEach(employee => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>EMP${employee.id.toString().padStart(3, '0')}</td>
                    <td>${employee.name}</td>
                    <td>${employee.position}</td>
                    <td>${employee.department}</td>
                    <td>${employee.joinDate}</td>
                    <td><span class="status-badge ${employee.status.toLowerCase()}">${employee.status}</span></td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="showEmployeeModal(${JSON.stringify(employee).replace(/"/g, '&quot;')})">Edit</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteEmployee(${employee.id})">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Delete user
        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user?')) {
                users = users.filter(u => u.id !== userId);
                refreshUserManagementTable();
            }
        }

        // Delete employee
        function deleteEmployee(employeeId) {
            if (confirm('Are you sure you want to delete this employee?')) {
                sampleEmployees = sampleEmployees.filter(e => e.id !== employeeId);
                refreshEmployeeManagementTable();
                populateEmployeeSelect();
            }
        }

        // Generate table header based on date range
        function generateTableHeader() {
            const startDate = new Date(startDateInput.value);
            const endDate = new Date(endDateInput.value);
            
            attendanceTableHeader.innerHTML = '';
            attendanceTableHeader.innerHTML = `
                <th>Employee Name</th>
                <th>Job Position</th>
            `;
            
            currentDates = [];
            let currentDate = new Date(startDate);
            
            while (currentDate <= endDate) {
                const dateStr = currentDate.toISOString().split('T')[0];
                const displayDate = formatDateForDisplay(currentDate);
                
                attendanceTableHeader.innerHTML += `
                    <th>
                        <div>${displayDate}</div>
                        <div class="date-header">${currentDate.toLocaleDateString('id-ID', { weekday: 'short' })}</div>
                    </th>
                `;
                
                currentDates.push(dateStr);
                currentDate.setDate(currentDate.getDate() + 1);
            }
            
            attendanceTableHeader.innerHTML += `<th>Action</th>`;
        }

        // Format date for display (DD/MM)
        function formatDateForDisplay(date) {
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            return `${day}/${month}`;
        }

        // Apply date filter
        function applyDateFilter() {
            const startDate = new Date(startDateInput.value);
            const endDate = new Date(endDateInput.value);
            
            if (startDate > endDate) {
                alert('Start date cannot be after end date!');
                return;
            }
            
            generateTableHeader();
            
            const tbody = attendanceEntryTable.querySelector('tbody');
            tbody.innerHTML = '';
            
            loadExistingDataForDateRange();
        }

        // Refresh date filter
        function refreshDateFilter() {
            const today = new Date();
            const endDate = new Date();
            endDate.setDate(today.getDate() + 9);
            
            startDateInput.value = today.toISOString().split('T')[0];
            endDateInput.value = endDate.toISOString().split('T')[0];
            
            applyDateFilter();
        }

        // Load existing data for current date range
        function loadExistingDataForDateRange() {
            const tbody = attendanceEntryTable.querySelector('tbody');
            const employeeData = {};
            
            attendanceData.forEach(record => {
                if (currentDates.includes(record.date)) {
                    if (!employeeData[record.employeeId]) {
                        employeeData[record.employeeId] = {};
                    }
                    employeeData[record.employeeId][record.date] = record.shift;
                }
            });
            
            sampleEmployees.forEach(employee => {
                if (employeeData[employee.id]) {
                    addAttendanceRowWithData(employee, employeeData[employee.id]);
                }
            });
        }

        // Add attendance row with existing data
        function addAttendanceRowWithData(employee, shiftData) {
            const tbody = attendanceEntryTable.querySelector('tbody');
            const row = document.createElement('tr');
            row.setAttribute('data-employee-id', employee.id);
            
            const employeeCell = document.createElement('td');
            const employeeSelect = document.createElement('select');
            employeeSelect.innerHTML = '<option value="">Pilih Karyawan</option>';
            sampleEmployees.forEach(emp => {
                const selected = emp.id === employee.id ? 'selected' : '';
                employeeSelect.innerHTML += `<option value="${emp.id}" ${selected}>${emp.name}</option>`;
            });
            employeeCell.appendChild(employeeSelect);
            
            const positionCell = document.createElement('td');
            const positionInput = document.createElement('input');
            positionInput.type = 'text';
            positionInput.readOnly = true;
            positionInput.value = employee.position;
            positionCell.appendChild(positionInput);
            
            const dateCells = [];
            currentDates.forEach(dateStr => {
                const dateCell = document.createElement('td');
                const shiftSelect = document.createElement('select');
                shiftSelect.innerHTML = '<option value="">Pilih Shift</option>';
                
                for (const [code, shift] of Object.entries(shiftCodes)) {
                    const selected = shiftData[dateStr] === code ? 'selected' : '';
                    shiftSelect.innerHTML += `<option value="${code}" ${selected}>${shift.name}</option>`;
                }
                
                shiftSelect.addEventListener('change', function() {
                    if (this.value && shiftCodes[this.value]) {
                        this.className = shiftCodes[this.value].class;
                    } else {
                        this.className = '';
                    }
                });
                
                if (shiftData[dateStr] && shiftCodes[shiftData[dateStr]]) {
                    shiftSelect.className = shiftCodes[shiftData[dateStr]].class;
                }
                
                dateCell.appendChild(shiftSelect);
                dateCells.push(dateCell);
            });
            
            const actionCell = document.createElement('td');
            const actionButtons = document.createElement('div');
            actionButtons.className = 'action-buttons';
            
            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = 'Delete';
            deleteBtn.className = 'btn btn-danger btn-sm';
            deleteBtn.addEventListener('click', function() {
                tbody.removeChild(row);
            });
            
            actionButtons.appendChild(deleteBtn);
            actionCell.appendChild(actionButtons);
            
            row.appendChild(employeeCell);
            row.appendChild(positionCell);
            dateCells.forEach(cell => row.appendChild(cell));
            row.appendChild(actionCell);
            
            employeeSelect.addEventListener('change', function() {
                const employeeId = this.value;
                const employee = sampleEmployees.find(emp => emp.id == employeeId);
                if (employee) {
                    positionInput.value = employee.position;
                    row.setAttribute('data-employee-id', employee.id);
                } else {
                    positionInput.value = '';
                    row.removeAttribute('data-employee-id');
                }
            });
            
            tbody.appendChild(row);
        }

        // Add new attendance row
        function addAttendanceRow() {
            const tbody = attendanceEntryTable.querySelector('tbody');
            const row = document.createElement('tr');
            
            const employeeCell = document.createElement('td');
            const employeeSelect = document.createElement('select');
            employeeSelect.innerHTML = '<option value="">Pilih Karyawan</option>';
            sampleEmployees.forEach(emp => {
                employeeSelect.innerHTML += `<option value="${emp.id}">${emp.name}</option>`;
            });
            employeeCell.appendChild(employeeSelect);
            
            const positionCell = document.createElement('td');
            const positionInput = document.createElement('input');
            positionInput.type = 'text';
            positionInput.readOnly = true;
            positionCell.appendChild(positionInput);
            
            const dateCells = [];
            currentDates.forEach(() => {
                const dateCell = document.createElement('td');
                const shiftSelect = document.createElement('select');
                shiftSelect.innerHTML = '<option value="">Pilih Shift</option>';
                
                for (const [code, shift] of Object.entries(shiftCodes)) {
                    shiftSelect.innerHTML += `<option value="${code}">${shift.name}</option>`;
                }
                
                shiftSelect.addEventListener('change', function() {
                    if (this.value && shiftCodes[this.value]) {
                        this.className = shiftCodes[this.value].class;
                    } else {
                        this.className = '';
                    }
                });
                
                dateCell.appendChild(shiftSelect);
                dateCells.push(dateCell);
            });
            
            const actionCell = document.createElement('td');
            const actionButtons = document.createElement('div');
            actionButtons.className = 'action-buttons';
            
            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = 'Delete';
            deleteBtn.className = 'btn btn-danger btn-sm';
            deleteBtn.addEventListener('click', function() {
                tbody.removeChild(row);
            });
            
            actionButtons.appendChild(deleteBtn);
            actionCell.appendChild(actionButtons);
            
            row.appendChild(employeeCell);
            row.appendChild(positionCell);
            dateCells.forEach(cell => row.appendChild(cell));
            row.appendChild(actionCell);
            
            employeeSelect.addEventListener('change', function() {
                const employeeId = this.value;
                const employee = sampleEmployees.find(emp => emp.id == employeeId);
                if (employee) {
                    positionInput.value = employee.position;
                    row.setAttribute('data-employee-id', employee.id);
                } else {
                    positionInput.value = '';
                    row.removeAttribute('data-employee-id');
                }
            });
            
            tbody.appendChild(row);
        }

        // Save attendance
        function saveAttendance() {
            const tbody = attendanceEntryTable.querySelector('tbody');
            const rows = tbody.querySelectorAll('tr');
            let savedCount = 0;
            
            rows.forEach(row => {
                const employeeSelect = row.querySelector('select');
                const positionInput = row.querySelector('input[type="text"]');
                const shiftSelects = row.querySelectorAll('select:not(:first-child)');
                
                const employeeId = employeeSelect.value;
                const employee = sampleEmployees.find(emp => emp.id == employeeId);
                
                if (employee) {
                    shiftSelects.forEach((select, index) => {
                        if (select.value && currentDates[index]) {
                            const attendanceRecord = {
                                employeeId: employee.id,
                                employeeName: employee.name,
                                position: employee.position,
                                date: currentDates[index],
                                shift: select.value,
                                checkIn: calculateCheckIn(select.value, employee.position),
                                checkOut: calculateCheckOut(select.value, employee.position),
                                status: 'Present'
                            };
                            
                            const existingIndex = attendanceData.findIndex(record => 
                                record.employeeId === attendanceRecord.employeeId && 
                                record.date === attendanceRecord.date
                            );
                            
                            if (existingIndex >= 0) {
                                attendanceData[existingIndex] = attendanceRecord;
                            } else {
                                attendanceData.push(attendanceRecord);
                            }
                            
                            savedCount++;
                        }
                    });
                }
            });
            
            alert(`Attendance data saved successfully! ${savedCount} records updated.`);
        }

        // Calculate check-in time
        function calculateCheckIn(shiftCode, position) {
            if (position === 'Dispatcher') {
                switch(shiftCode) {
                    case '1': return '07:00';
                    case '2': return '15:00';
                    case '3': return '23:00';
                    case '11': return '07:00';
                    case '22': return '15:00';
                    default: return '';
                }
            } else if (position === 'Booking') {
                switch(shiftCode) {
                    case '1': return '08:00';
                    case '11': return '08:00';
                    default: return '';
                }
            }
            return '';
        }

        // Calculate check-out time
        function calculateCheckOut(shiftCode, position) {
            if (position === 'Dispatcher') {
                switch(shiftCode) {
                    case '1': return '15:00';
                    case '2': return '23:00';
                    case '3': return '08:00';
                    case '11': return '12:00';
                    case '22': return '20:00';
                    default: return '';
                }
            } else if (position === 'Booking') {
                switch(shiftCode) {
                    case '1': return '16:00';
                    case '11': return '13:00';
                    default: return '';
                }
            }
            return '';
        }

        // Populate employee select
        function populateEmployeeSelect() {
            employeeSelect.innerHTML = '<option value="">Pilih Karyawan</option>';
            sampleEmployees.forEach(emp => {
                employeeSelect.innerHTML += `<option value="${emp.id}">${emp.name}</option>`;
            });
        }

        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            
            const username = usernameInput.value;
            const password = passwordInput.value;
            
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                isAdmin = user.role === 'admin';
                currentUserSpan.textContent = user.username;
                
                adminMenu.style.display = isAdmin ? 'block' : 'none';
                userMenu.style.display = isAdmin ? 'none' : 'block';
                
                user.lastLogin = new Date();
                
                loginScreen.style.display = 'none';
                appContainer.style.display = 'block';
                
                if (isAdmin) {
                    showContentSection('attendanceEntry');
                } else {
                    showContentSection('attendanceTable');
                }
                
                refreshAllData();
            } else {
                loginAlert.style.display = 'block';
            }
        }

        // Handle logout
        function handleLogout() {
            currentUser = null;
            isAdmin = false;
            loginScreen.style.display = 'block';
            appContainer.style.display = 'none';
            usernameInput.value = 'admin';
            passwordInput.value = 'admin123';
            loginAlert.style.display = 'none';
        }

        // Handle change password
        function handleChangePassword() {
            const newPassword = prompt('Masukkan password baru:');
            if (newPassword && newPassword.length >= 3) {
                currentUser.password = newPassword;
                
                passwordChanges.push({
                    username: currentUser.username,
                    newPassword: newPassword,
                    changeDate: new Date(),
                    changedBy: currentUser.username
                });
                
                alert('Password berhasil diubah!');
            } else {
                alert('Password harus minimal 3 karakter!');
            }
        }

        // Handle menu click
        function handleMenuClick(e) {
            e.preventDefault();
            const target = e.target.getAttribute('data-target');
            
            menuItems.forEach(item => {
                item.classList.remove('active');
            });
            e.target.classList.add('active');
            
            showContentSection(target);
        }

        // Show content section
        function showContentSection(sectionId) {
            contentSections.forEach(section => {
                section.classList.remove('active');
            });
            
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                pageTitle.textContent = targetSection.querySelector('h3').textContent;
                
                // Refresh data for the section
                refreshSectionData(sectionId);
            }
        }

        // Refresh section data
        function refreshSectionData(sectionId) {
            switch(sectionId) {
                case 'appManagement':
                    refreshUserManagementTable();
                    refreshEmployeeManagementTable();
                    break;
                // Add other section refreshes here
            }
        }

        // Refresh all data
        function refreshAllData() {
            refreshUserManagementTable();
            refreshEmployeeManagementTable();
        }

        // Load sample data
        function loadSampleData() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(today.getDate() + 1);
            
            attendanceData = [
                {
                    employeeId: 1,
                    employeeName: "Ahmad Susanto",
                    position: "Dispatcher",
                    date: today.toISOString().split('T')[0],
                    shift: "1",
                    checkIn: "07:00",
                    checkOut: "15:00",
                    status: "Present"
                },
                {
                    employeeId: 2,
                    employeeName: "Budi Santoso",
                    position: "Dispatcher",
                    date: today.toISOString().split('T')[0],
                    shift: "2",
                    checkIn: "15:00",
                    checkOut: "23:00",
                    status: "Present"
                }
            ];
        }

        // Initialize the application
        initApp();
    </script>
</body>
</html>
